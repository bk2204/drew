DREW_UTIL_DIR			:= lib/libdrew-util
DREW_UTIL_SONAME		:= libdrew-util.so.0
DREW_UTIL_SYMLINK		:= $(basename $(DREW_UTIL_SONAME))

DREW_UTIL_OBJS			+= asn1.o
DREW_UTIL_OBJS			+= x509.o
DREW_UTIL_OBJS			+= codec.o

DREW_UTIL_DIROBJS		:= $(patsubst %,$(DREW_UTIL_DIR)/%,$(DREW_UTIL_OBJS))
OBJECTS					+= $(DREW_UTIL_DIROBJS)

ifeq ($(CFG_THREAD_SAFE),y)
$(DREW_UTIL_DIR)/$(DREW_UTIL_SONAME): CPPFLAGS += -DDREW_UTIL_THREAD_SAFE
endif

$(DREW_UTIL_DIR)/$(DREW_UTIL_SONAME): CPPFLAGS += -I$(DREW_UTIL_DIR)/include
$(DREW_UTIL_DIR)/$(DREW_UTIL_SONAME): $(DREW_UTIL_DIROBJS)
	$(CXX) $(CXXFLAGS) $(LIBCFLAGS) -o $@ $< $(LIBS)

$(DREW_UTIL_SONAME): $(DREW_UTIL_DIR)/$(DREW_UTIL_SONAME)
	ln -sf $^ $@

$(DREW_UTIL_SYMLINK): $(DREW_UTIL_SONAME)
	ln -sf $^ $@
