DREW_GNUTLS_DIR			:= lib/libdrew-gnutls
DREW_GNUTLS_SONAME		:= libdrew-gnutls.so.0
DREW_GNUTLS_SYMLINK		:= $(basename $(DREW_GNUTLS_SONAME))

DREW_GNUTLS_OBJS		+= global.o

DREW_GNUTLS_DIROBJS		:= $(patsubst %,$(DREW_GNUTLS_DIR)/%,$(DREW_GNUTLS_OBJS))

$(DREW_GNUTLS_DIR)/$(DREW_GNUTLS_SONAME): LIBS += $(DREW_TLS_SONAME) -lpthread
$(DREW_GNUTLS_DIR)/$(DREW_GNUTLS_SONAME): $(DREW_TLS_SONAME)
$(DREW_GNUTLS_DIR)/$(DREW_GNUTLS_SONAME): $(DREW_GNUTLS_DIROBJS)
	$(CC) $(CFLAGS) $(LIBCFLAGS) -o $(.TARGET) $(.ALLSRC) $(LIBS)

$(DREW_GNUTLS_SONAME): $(DREW_GNUTLS_DIR)/$(DREW_GNUTLS_SONAME)
	ln -sf $(.ALLSRC) $(.TARGET)

$(DREW_GNUTLS_SYMLINK): $(DREW_GNUTLS_SONAME)
	ln -sf $(.ALLSRC) $(.TARGET)
