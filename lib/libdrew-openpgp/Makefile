DREW_OPGP_DIR		:= lib/libdrew-openpgp
DREW_OPGP_SONAME	:= libdrew-openpgp.so.0
DREW_OPGP_SYMLINK	:= $(basename $(DREW_OPGP_SONAME))

DREW_OPGP_OBJS		+= parser.o
DREW_OPGP_OBJS		+= key.o
DREW_OPGP_OBJS		+= sig.o
DREW_OPGP_DIR_OBJS	+= $(patsubst %,$(DREW_OPGP_DIR)/%,$(DREW_OPGP_OBJS))

$(DREW_OPGP_DIR)/$(DREW_OPGP_SONAME): CFLAGS += -I$(DREW_OPGP_DIR)/include
$(DREW_OPGP_DIR)/$(DREW_OPGP_SONAME): $(DREW_OPGP_DIR_OBJS)
	$(CC) $(CFLAGS) $(LIBCFLAGS) -o $(.TARGET) $(.ALLSRC) $(LIBS)

$(DREW_OPGP_SONAME): $(DREW_OPGP_DIR)/$(DREW_OPGP_SONAME)
	ln -sf $(.ALLSRC) $(.TARGET)

$(DREW_OPGP_SYMLINK): $(DREW_OPGP_SONAME)
	ln -sf $(.ALLSRC) $(.TARGET)
